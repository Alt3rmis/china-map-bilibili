/**
 * æŒ‰çœä»½é‡æ–°ç»„ç»‡æ•°æ®è„šæœ¬
 * å°† data.js ä¸­çš„è§†é¢‘æŒ‰çœä»½åˆ†ç»„
 * ä½¿ç”¨æ–¹æ³•: node scripts/reorganize-by-province.js
 * è¾“å‡º: data/data.js
 */

const fs = require('fs');
const path = require('path');

// åŸå¸‚åˆ°çœä»½çš„æ˜ å°„
const CITY_TO_PROVINCE = {
    // ç›´è¾–å¸‚
    'åŒ—äº¬': 'åŒ—äº¬',
    'ä¸Šæµ·': 'ä¸Šæµ·',
    'å¤©æ´¥': 'å¤©æ´¥',
    'é‡åº†': 'é‡åº†',
    // çœä¼šåŸå¸‚
    'å¹¿å·': 'å¹¿ä¸œ', 'æ·±åœ³': 'å¹¿ä¸œ',
    'æˆéƒ½': 'å››å·',
    'æ­å·': 'æµ™æ±Ÿ',
    'å—äº¬': 'æ±Ÿè‹',
    'æ­¦æ±‰': 'æ¹–åŒ—',
    'é•¿æ²™': 'æ¹–å—',
    'è¥¿å®‰': 'é™•è¥¿',
    'éƒ‘å·': 'æ²³å—',
    'çŸ³å®¶åº„': 'æ²³åŒ—',
    'å¤ªåŸ': 'å±±è¥¿',
    'åˆè‚¥': 'å®‰å¾½',
    'å—æ˜Œ': 'æ±Ÿè¥¿',
    'ç¦å·': 'ç¦å»º', 'å¦é—¨': 'ç¦å»º',
    'å—å®': 'å¹¿è¥¿',
    'æµ·å£': 'æµ·å—',
    'æ˜†æ˜': 'äº‘å—',
    'è´µé˜³': 'è´µå·',
    'æ‹‰è¨': 'è¥¿è—',
    'å…°å·': 'ç”˜è‚ƒ',
    'è¥¿å®': 'é’æµ·',
    'é“¶å·': 'å®å¤',
    'ä¹Œé²æœ¨é½': 'æ–°ç–†',
    'å‘¼å’Œæµ©ç‰¹': 'å†…è’™å¤',
    'é•¿æ˜¥': 'å‰æ—',
    'æ²ˆé˜³': 'è¾½å®',
    'å“ˆå°”æ»¨': 'é»‘é¾™æ±Ÿ',
    'æµå—': 'å±±ä¸œ',
    // æ²³åŒ—
    'å”å±±': 'æ²³åŒ—', 'ç§¦çš‡å²›': 'æ²³åŒ—', 'é‚¯éƒ¸': 'æ²³åŒ—', 'é‚¢å°': 'æ²³åŒ—', 'ä¿å®š': 'æ²³åŒ—',
    'å¼ å®¶å£': 'æ²³åŒ—', 'æ‰¿å¾·': 'æ²³åŒ—', 'æ²§å·': 'æ²³åŒ—', 'å»ŠåŠ': 'æ²³åŒ—', 'è¡¡æ°´': 'æ²³åŒ—',
    'è¾›é›†': 'æ²³åŒ—', 'æ™‹å·': 'æ²³åŒ—', 'æ–°ä¹': 'æ²³åŒ—', 'éµåŒ–': 'æ²³åŒ—', 'è¿å®‰': 'æ²³åŒ—',
    'æ­¦å®‰': 'æ²³åŒ—', 'å—å®«': 'æ²³åŒ—', 'æ²™æ²³': 'æ²³åŒ—', 'æ¶¿å·': 'æ²³åŒ—', 'å®šå·': 'æ²³åŒ—',
    'å®‰å›½': 'æ²³åŒ—', 'é«˜ç¢‘åº—': 'æ²³åŒ—', 'æ³Šå¤´': 'æ²³åŒ—', 'ä»»ä¸˜': 'æ²³åŒ—', 'é»„éª…': 'æ²³åŒ—',
    'æ²³é—´': 'æ²³åŒ—', 'éœ¸å·': 'æ²³åŒ—', 'ä¸‰æ²³': 'æ²³åŒ—', 'æ·±å·': 'æ²³åŒ—',
    // å±±è¥¿
    'å¤§åŒ': 'å±±è¥¿', 'é˜³æ³‰': 'å±±è¥¿', 'é•¿æ²»': 'å±±è¥¿', 'æ™‹åŸ': 'å±±è¥¿', 'æœ”å·': 'å±±è¥¿',
    'æ™‹ä¸­': 'å±±è¥¿', 'è¿åŸ': 'å±±è¥¿', 'å¿»å·': 'å±±è¥¿', 'ä¸´æ±¾': 'å±±è¥¿', 'å•æ¢': 'å±±è¥¿',
    'å¤äº¤': 'å±±è¥¿', 'é«˜å¹³': 'å±±è¥¿', 'ä»‹ä¼‘': 'å±±è¥¿', 'æ°¸æµ': 'å±±è¥¿', 'æ²³æ´¥': 'å±±è¥¿',
    'åŸå¹³': 'å±±è¥¿', 'ä¾¯é©¬': 'å±±è¥¿', 'éœå·': 'å±±è¥¿', 'å­ä¹‰': 'å±±è¥¿', 'æ±¾é˜³': 'å±±è¥¿',
    // å†…è’™å¤
    'åŒ…å¤´': 'å†…è’™å¤', 'ä¹Œæµ·': 'å†…è’™å¤', 'èµ¤å³°': 'å†…è’™å¤', 'é€šè¾½': 'å†…è’™å¤',
    'é„‚å°”å¤šæ–¯': 'å†…è’™å¤', 'å‘¼ä¼¦è´å°”': 'å†…è’™å¤', 'å·´å½¦æ·–å°”': 'å†…è’™å¤', 'ä¹Œå…°å¯Ÿå¸ƒ': 'å†…è’™å¤',
    'æ»¡æ´²é‡Œ': 'å†…è’™å¤', 'äºŒè¿æµ©ç‰¹': 'å†…è’™å¤', 'ä¹Œå…°æµ©ç‰¹': 'å†…è’™å¤', 'é˜¿å°”å±±': 'å†…è’™å¤',
    'é”¡æ—æµ©ç‰¹': 'å†…è’™å¤', 'å·´å½¦æµ©ç‰¹': 'å†…è’™å¤', 'ä¸°é•‡': 'å†…è’™å¤', 'ç‰™å…‹çŸ³': 'å†…è’™å¤',
    // è¾½å®
    'å¤§è¿': 'è¾½å®', 'éå±±': 'è¾½å®', 'æŠšé¡º': 'è¾½å®', 'æœ¬æºª': 'è¾½å®', 'ä¸¹ä¸œ': 'è¾½å®',
    'é”¦å·': 'è¾½å®', 'è¥å£': 'è¾½å®', 'é˜œæ–°': 'è¾½å®', 'è¾½é˜³': 'è¾½å®', 'ç›˜é”¦': 'è¾½å®',
    'é“å²­': 'è¾½å®', 'æœé˜³': 'è¾½å®', 'è‘«èŠ¦å²›': 'è¾½å®', 'ç“¦æˆ¿åº—': 'è¾½å®', 'æµ·åŸ': 'è¾½å®',
    'ä¸œæ¸¯': 'è¾½å®', 'å‡¤åŸ': 'è¾½å®', 'å‡Œæµ·': 'è¾½å®', 'åŒ—é•‡': 'è¾½å®', 'å¤§çŸ³æ¡¥': 'è¾½å®',
    'ç›–å·': 'è¾½å®', 'ç¯å¡”': 'è¾½å®', 'è°ƒå…µå±±': 'è¾½å®', 'å¼€åŸ': 'è¾½å®',
    // å‰æ—
    'å‰æ—': 'å‰æ—', 'å››å¹³': 'å‰æ—', 'è¾½æº': 'å‰æ—', 'é€šåŒ–': 'å‰æ—', 'ç™½å±±': 'å‰æ—',
    'æ¾åŸ': 'å‰æ—', 'ç™½åŸ': 'å‰æ—', 'å…¬ä¸»å²­': 'å‰æ—', 'æ¢…æ²³å£': 'å‰æ—', 'é›†å®‰': 'å‰æ—',
    'ä¸´æ±Ÿ': 'å‰æ—', 'å¤§å®‰': 'å‰æ—', 'æ´®å—': 'å‰æ—', 'ç²æ˜¥': 'å‰æ—', 'é¾™äº•': 'å‰æ—',
    'å’Œé¾™': 'å‰æ—', 'æ•¦åŒ–': 'å‰æ—',
    // é»‘é¾™æ±Ÿ
    'é½é½å“ˆå°”': 'é»‘é¾™æ±Ÿ', 'é¸¡è¥¿': 'é»‘é¾™æ±Ÿ', 'é¹¤å²—': 'é»‘é¾™æ±Ÿ', 'åŒé¸­å±±': 'é»‘é¾™æ±Ÿ',
    'å¤§åº†': 'é»‘é¾™æ±Ÿ', 'ä¼Šæ˜¥': 'é»‘é¾™æ±Ÿ', 'ä½³æœ¨æ–¯': 'é»‘é¾™æ±Ÿ', 'ä¸ƒå°æ²³': 'é»‘é¾™æ±Ÿ', 'ç‰¡ä¸¹æ±Ÿ': 'é»‘é¾™æ±Ÿ',
    'é»‘æ²³': 'é»‘é¾™æ±Ÿ', 'ç»¥åŒ–': 'é»‘é¾™æ±Ÿ', 'ç»¥èŠ¬æ²³': 'é»‘é¾™æ±Ÿ', 'åŒæ±Ÿ': 'é»‘é¾™æ±Ÿ', 'è™æ—': 'é»‘é¾™æ±Ÿ',
    'å¯†å±±': 'é»‘é¾™æ±Ÿ', 'å¯Œé”¦': 'é»‘é¾™æ±Ÿ', 'æ¼ æ²³': 'é»‘é¾™æ±Ÿ', 'é“åŠ›': 'é»‘é¾™æ±Ÿ', 'å°šå¿—': 'é»‘é¾™æ±Ÿ',
    'äº”å¸¸': 'é»‘é¾™æ±Ÿ', 'æµ·ä¼¦': 'é»‘é¾™æ±Ÿ', 'è‚‡ä¸œ': 'é»‘é¾™æ±Ÿ',
    // æ±Ÿè‹
    'è‹å·': 'æ±Ÿè‹', 'æ— é”¡': 'æ±Ÿè‹', 'å¸¸å·': 'æ±Ÿè‹', 'å—é€š': 'æ±Ÿè‹', 'è¿äº‘æ¸¯': 'æ±Ÿè‹',
    'æ·®å®‰': 'æ±Ÿè‹', 'ç›åŸ': 'æ±Ÿè‹', 'æ‰¬å·': 'æ±Ÿè‹', 'é•‡æ±Ÿ': 'æ±Ÿè‹', 'æ³°å·': 'æ±Ÿè‹', 'å®¿è¿': 'æ±Ÿè‹',
    'æ±Ÿé˜´': 'æ±Ÿè‹', 'å®œå…´': 'æ±Ÿè‹', 'æ–°æ²‚': 'æ±Ÿè‹', 'é‚³å·': 'æ±Ÿè‹', 'æº§é˜³': 'æ±Ÿè‹', 'é‡‘å›': 'æ±Ÿè‹',
    'å¸¸ç†Ÿ': 'æ±Ÿè‹', 'å¼ å®¶æ¸¯': 'æ±Ÿè‹', 'æ˜†å±±': 'æ±Ÿè‹', 'å¤ªä»“': 'æ±Ÿè‹', 'å¯ä¸œ': 'æ±Ÿè‹', 'å¦‚çš‹': 'æ±Ÿè‹',
    // æµ™æ±Ÿ
    'å®æ³¢': 'æµ™æ±Ÿ', 'æ¸©å·': 'æµ™æ±Ÿ', 'å˜‰å…´': 'æµ™æ±Ÿ', 'æ¹–å·': 'æµ™æ±Ÿ', 'ç»å…´': 'æµ™æ±Ÿ',
    'é‡‘å': 'æµ™æ±Ÿ', 'è¡¢å·': 'æµ™æ±Ÿ', 'èˆŸå±±': 'æµ™æ±Ÿ', 'å°å·': 'æµ™æ±Ÿ', 'ä¸½æ°´': 'æµ™æ±Ÿ',
    'å»ºå¾·': 'æµ™æ±Ÿ', 'ä¸´å®‰': 'æµ™æ±Ÿ', 'ä½™å§š': 'æµ™æ±Ÿ', 'æ…ˆæºª': 'æµ™æ±Ÿ', 'ç‘å®‰': 'æµ™æ±Ÿ',
    'ä¹æ¸…': 'æµ™æ±Ÿ', 'æµ·å®': 'æµ™æ±Ÿ', 'å¹³æ¹–': 'æµ™æ±Ÿ', 'æ¡ä¹¡': 'æµ™æ±Ÿ', 'è¯¸æš¨': 'æµ™æ±Ÿ', 'åµŠå·': 'æµ™æ±Ÿ',
    // å®‰å¾½
    'èŠœæ¹–': 'å®‰å¾½', 'èšŒåŸ ': 'å®‰å¾½', 'æ·®å—': 'å®‰å¾½', 'é©¬éå±±': 'å®‰å¾½', 'æ·®åŒ—': 'å®‰å¾½',
    'é“œé™µ': 'å®‰å¾½', 'å®‰åº†': 'å®‰å¾½', 'é»„å±±': 'å®‰å¾½', 'æ»å·': 'å®‰å¾½', 'é˜œé˜³': 'å®‰å¾½', 'å®¿å·': 'å®‰å¾½',
    'å…­å®‰': 'å®‰å¾½', 'äº³å·': 'å®‰å¾½', 'æ± å·': 'å®‰å¾½', 'å®£åŸ': 'å®‰å¾½', 'ç•Œé¦–': 'å®‰å¾½', 'æ¡åŸ': 'å®‰å¾½',
    'å®å›½': 'å®‰å¾½', 'å¤©é•¿': 'å®‰å¾½', 'æ˜å…‰': 'å®‰å¾½',
    // ç¦å»º
    'è†ç”°': 'ç¦å»º', 'ä¸‰æ˜': 'ç¦å»º', 'æ³‰å·': 'ç¦å»º', 'æ¼³å·': 'ç¦å»º', 'å—å¹³': 'ç¦å»º',
    'é¾™å²©': 'ç¦å»º', 'å®å¾·': 'ç¦å»º', 'ç¦æ¸…': 'ç¦å»º', 'é‚µæ­¦': 'ç¦å»º', 'æ­¦å¤·å±±': 'ç¦å»º',
    'å»ºç“¯': 'ç¦å»º', 'æ°¸å®‰': 'ç¦å»º', 'çŸ³ç‹®': 'ç¦å»º', 'æ™‹æ±Ÿ': 'ç¦å»º', 'å—å®‰': 'ç¦å»º',
    'é¾™æµ·': 'ç¦å»º', 'æ¼³å¹³': 'ç¦å»º',
    // æ±Ÿè¥¿
    'æ™¯å¾·é•‡': 'æ±Ÿè¥¿', 'èä¹¡': 'æ±Ÿè¥¿', 'ä¹æ±Ÿ': 'æ±Ÿè¥¿', 'æ–°ä½™': 'æ±Ÿè¥¿', 'é¹°æ½­': 'æ±Ÿè¥¿',
    'èµ£å·': 'æ±Ÿè¥¿', 'å‰å®‰': 'æ±Ÿè¥¿', 'å®œæ˜¥': 'æ±Ÿè¥¿', 'æŠšå·': 'æ±Ÿè¥¿', 'ä¸Šé¥¶': 'æ±Ÿè¥¿',
    'ç‘æ˜Œ': 'æ±Ÿè¥¿', 'ä¹å¹³': 'æ±Ÿè¥¿', 'ç‘é‡‘': 'æ±Ÿè¥¿', 'å¾·å…´': 'æ±Ÿè¥¿', 'è´µæºª': 'æ±Ÿè¥¿',
    'æ¨Ÿæ ‘': 'æ±Ÿè¥¿', 'ä¸°åŸ': 'æ±Ÿè¥¿', 'é«˜å®‰': 'æ±Ÿè¥¿',
    // å±±ä¸œ
    'é’å²›': 'å±±ä¸œ', 'æ·„åš': 'å±±ä¸œ', 'æ£åº„': 'å±±ä¸œ', 'ä¸œè¥': 'å±±ä¸œ', 'çƒŸå°': 'å±±ä¸œ',
    'æ½åŠ': 'å±±ä¸œ', 'æµå®': 'å±±ä¸œ', 'æ³°å®‰': 'å±±ä¸œ', 'å¨æµ·': 'å±±ä¸œ', 'æ—¥ç…§': 'å±±ä¸œ', 'ä¸´æ²‚': 'å±±ä¸œ',
    'å¾·å·': 'å±±ä¸œ', 'èŠåŸ': 'å±±ä¸œ', 'æ»¨å·': 'å±±ä¸œ', 'èæ³½': 'å±±ä¸œ', 'èƒ¶å·': 'å±±ä¸œ',
    'å³å¢¨': 'å±±ä¸œ', 'å¹³åº¦': 'å±±ä¸œ', 'è±è¥¿': 'å±±ä¸œ', 'æ»•å·': 'å±±ä¸œ', 'é¾™å£': 'å±±ä¸œ',
    'è±é˜³': 'å±±ä¸œ', 'è±å·': 'å±±ä¸œ', 'æ‹›è¿œ': 'å±±ä¸œ', 'æ –éœ': 'å±±ä¸œ', 'é’å·': 'å±±ä¸œ', 'è¯¸åŸ': 'å±±ä¸œ', 'å¯¿å…‰': 'å±±ä¸œ',
    // æ²³å—
    'å¼€å°': 'æ²³å—', 'æ´›é˜³': 'æ²³å—', 'å¹³é¡¶å±±': 'æ²³å—', 'å®‰é˜³': 'æ²³å—', 'é¹¤å£': 'æ²³å—',
    'æ–°ä¹¡': 'æ²³å—', 'ç„¦ä½œ': 'æ²³å—', 'æ¿®é˜³': 'æ²³å—', 'è®¸æ˜Œ': 'æ²³å—', 'æ¼¯æ²³': 'æ²³å—',
    'ä¸‰é—¨å³¡': 'æ²³å—', 'å—é˜³': 'æ²³å—', 'å•†ä¸˜': 'æ²³å—', 'ä¿¡é˜³': 'æ²³å—', 'å‘¨å£': 'æ²³å—',
    'é©»é©¬åº—': 'æ²³å—', 'è¥é˜³': 'æ²³å—', 'æ–°éƒ‘': 'æ²³å—', 'ç™»å°': 'æ²³å—', 'å·©ä¹‰': 'æ²³å—',
    'æ–°å¯†': 'æ²³å—', 'åƒå¸ˆ': 'æ²³å—', 'èˆé’¢': 'æ²³å—', 'æ±å·': 'æ²³å—', 'æ—å·': 'æ²³å—',
    'å«è¾‰': 'æ²³å—', 'è¾‰å¿': 'æ²³å—', 'æ²é˜³': 'æ²³å—',
    // æ¹–åŒ—
    'é»„çŸ³': 'æ¹–åŒ—', 'åå °': 'æ¹–åŒ—', 'å®œæ˜Œ': 'æ¹–åŒ—', 'è¥„é˜³': 'æ¹–åŒ—', 'é„‚å·': 'æ¹–åŒ—',
    'è†é—¨': 'æ¹–åŒ—', 'å­æ„Ÿ': 'æ¹–åŒ—', 'è†å·': 'æ¹–åŒ—', 'é»„å†ˆ': 'æ¹–åŒ—', 'å’¸å®': 'æ¹–åŒ—',
    'éšå·': 'æ¹–åŒ—', 'å¤§å†¶': 'æ¹–åŒ—', 'ä¸¹æ±Ÿå£': 'æ¹–åŒ—', 'å®œéƒ½': 'æ¹–åŒ—', 'å½“é˜³': 'æ¹–åŒ—',
    'ææ±Ÿ': 'æ¹–åŒ—', 'è€æ²³å£': 'æ¹–åŒ—', 'æ£é˜³': 'æ¹–åŒ—', 'å®œåŸ': 'æ¹–åŒ—', 'é’Ÿç¥¥': 'æ¹–åŒ—',
    'äº¬å±±': 'æ¹–åŒ—', 'å®‰é™†': 'æ¹–åŒ—', 'æ½œæ±Ÿ': 'æ¹–åŒ—', 'ä»™æ¡ƒ': 'æ¹–åŒ—', 'å¤©é—¨': 'æ¹–åŒ—',
    // æ¹–å—
    'æ ªæ´²': 'æ¹–å—', 'æ¹˜æ½­': 'æ¹–å—', 'è¡¡é˜³': 'æ¹–å—', 'é‚µé˜³': 'æ¹–å—', 'å²³é˜³': 'æ¹–å—',
    'å¸¸å¾·': 'æ¹–å—', 'å¼ å®¶ç•Œ': 'æ¹–å—', 'ç›Šé˜³': 'æ¹–å—', 'éƒ´å·': 'æ¹–å—', 'æ°¸å·': 'æ¹–å—',
    'æ€€åŒ–': 'æ¹–å—', 'å¨„åº•': 'æ¹–å—', 'æµé˜³': 'æ¹–å—', 'é†´é™µ': 'æ¹–å—', 'éŸ¶å±±': 'æ¹–å—',
    'è€’é˜³': 'æ¹–å—', 'å¸¸å®': 'æ¹–å—', 'æ­¦å†ˆ': 'æ¹–å—', 'æ±¨ç½—': 'æ¹–å—', 'ä¸´æ¹˜': 'æ¹–å—',
    'æ´¥å¸‚': 'æ¹–å—', 'æ²…æ±Ÿ': 'æ¹–å—', 'èµ„å…´': 'æ¹–å—', 'æ´ªæ±Ÿ': 'æ¹–å—', 'å¹³æ±Ÿå¿': 'æ¹–å—',
    // å¹¿ä¸œ
    'ç æµ·': 'å¹¿ä¸œ', 'æ±•å¤´': 'å¹¿ä¸œ', 'ä½›å±±': 'å¹¿ä¸œ', 'éŸ¶å…³': 'å¹¿ä¸œ', 'æ¹›æ±Ÿ': 'å¹¿ä¸œ',
    'è‚‡åº†': 'å¹¿ä¸œ', 'æ±Ÿé—¨': 'å¹¿ä¸œ', 'èŒ‚å': 'å¹¿ä¸œ', 'æƒ å·': 'å¹¿ä¸œ', 'æ¢…å·': 'å¹¿ä¸œ',
    'æ±•å°¾': 'å¹¿ä¸œ', 'æ²³æº': 'å¹¿ä¸œ', 'é˜³æ±Ÿ': 'å¹¿ä¸œ', 'æ¸…è¿œ': 'å¹¿ä¸œ', 'ä¸œè': 'å¹¿ä¸œ',
    'ä¸­å±±': 'å¹¿ä¸œ', 'æ½®å·': 'å¹¿ä¸œ', 'æ­é˜³': 'å¹¿ä¸œ', 'äº‘æµ®': 'å¹¿ä¸œ', 'ä¹æ˜Œ': 'å¹¿ä¸œ',
    'å—é›„': 'å¹¿ä¸œ', 'å°å±±': 'å¹¿ä¸œ', 'å¼€å¹³': 'å¹¿ä¸œ', 'é¹¤å±±': 'å¹¿ä¸œ', 'æ©å¹³': 'å¹¿ä¸œ', 'å»‰æ±Ÿ': 'å¹¿ä¸œ',
    'é›·å·': 'å¹¿ä¸œ', 'å´å·': 'å¹¿ä¸œ', 'åŒ–å·': 'å¹¿ä¸œ', 'ä¿¡å®œ': 'å¹¿ä¸œ', 'é«˜å·': 'å¹¿ä¸œ',
    'å››ä¼š': 'å¹¿ä¸œ', 'å…´å®': 'å¹¿ä¸œ', 'é™†ä¸°': 'å¹¿ä¸œ', 'é˜³æ˜¥': 'å¹¿ä¸œ', 'è‹±å¾·': 'å¹¿ä¸œ',
    'è¿å·': 'å¹¿ä¸œ', 'æ™®å®': 'å¹¿ä¸œ', 'ç½—å®š': 'å¹¿ä¸œ',
    // å¹¿è¥¿
    'æŸ³å·': 'å¹¿è¥¿', 'æ¡‚æ—': 'å¹¿è¥¿', 'æ¢§å·': 'å¹¿è¥¿', 'åŒ—æµ·': 'å¹¿è¥¿', 'é˜²åŸæ¸¯': 'å¹¿è¥¿',
    'é’¦å·': 'å¹¿è¥¿', 'è´µæ¸¯': 'å¹¿è¥¿', 'ç‰æ—': 'å¹¿è¥¿', 'ç™¾è‰²': 'å¹¿è¥¿', 'è´ºå·': 'å¹¿è¥¿',
    'æ²³æ± ': 'å¹¿è¥¿', 'æ¥å®¾': 'å¹¿è¥¿', 'å´‡å·¦': 'å¹¿è¥¿', 'å²‘æºª': 'å¹¿è¥¿', 'ä¸œå…´': 'å¹¿è¥¿',
    'æ¡‚å¹³': 'å¹¿è¥¿', 'åŒ—æµ': 'å¹¿è¥¿', 'é–è¥¿': 'å¹¿è¥¿', 'å¹³æœ': 'å¹¿è¥¿', 'å‡­ç¥¥': 'å¹¿è¥¿',
    'åˆå±±': 'å¹¿è¥¿', 'è”æµ¦': 'å¹¿è¥¿', 'æ¨ªå·': 'å¹¿è¥¿',
    // æµ·å—
    'ä¸‰äºš': 'æµ·å—', 'ä¸‰æ²™': 'æµ·å—', 'å„‹å·': 'æµ·å—', 'äº”æŒ‡å±±': 'æµ·å—', 'ç¼æµ·': 'æµ·å—',
    'æ–‡æ˜Œ': 'æµ·å—', 'ä¸‡å®': 'æµ·å—', 'ä¸œæ–¹': 'æµ·å—', 'é™µæ°´': 'æµ·å—',
    // å››å·
    'è‡ªè´¡': 'å››å·', 'æ”€æèŠ±': 'å››å·', 'æ³¸å·': 'å››å·', 'å¾·é˜³': 'å››å·', 'ç»µé˜³': 'å››å·',
    'å¹¿å…ƒ': 'å››å·', 'é‚å®': 'å››å·', 'å†…æ±Ÿ': 'å››å·', 'ä¹å±±': 'å››å·', 'å—å……': 'å››å·',
    'çœ‰å±±': 'å››å·', 'å®œå®¾': 'å››å·', 'å¹¿å®‰': 'å››å·', 'è¾¾å·': 'å››å·', 'é›…å®‰': 'å››å·',
    'å·´ä¸­': 'å››å·', 'èµ„é˜³': 'å››å·', 'éƒ½æ±Ÿå °': 'å››å·', 'å½­å·': 'å››å·', 'é‚›å´ƒ': 'å››å·',
    'å´‡å·': 'å››å·', 'å¹¿æ±‰': 'å››å·', 'ä»€é‚¡': 'å››å·', 'ç»µç«¹': 'å››å·', 'æ±Ÿæ²¹': 'å››å·',
    'å³¨çœ‰å±±': 'å››å·', 'é˜†ä¸­': 'å››å·', 'åè“¥': 'å››å·', 'ä¸‡æº': 'å››å·', 'ç®€é˜³': 'å››å·', 'è¥¿æ˜Œ': 'å››å·',
    // è´µå·
    'å…­ç›˜æ°´': 'è´µå·', 'éµä¹‰': 'è´µå·', 'å®‰é¡º': 'è´µå·', 'æ¯•èŠ‚': 'è´µå·', 'é“œä»': 'è´µå·',
    'æ¸…é•‡': 'è´µå·', 'èµ¤æ°´': 'è´µå·', 'ä»æ€€': 'è´µå·', 'å‡¯é‡Œ': 'è´µå·', 'éƒ½åŒ€': 'è´µå·',
    'å…´ä¹‰': 'è´µå·', 'ç¦æ³‰': 'è´µå·',
    // äº‘å—
    'æ›²é–': 'äº‘å—', 'ç‰æºª': 'äº‘å—', 'ä¿å±±': 'äº‘å—', 'æ˜­é€š': 'äº‘å—', 'ä¸½æ±Ÿ': 'äº‘å—',
    'æ™®æ´±': 'äº‘å—', 'ä¸´æ²§': 'äº‘å—', 'å®‰å®': 'äº‘å—', 'å®£å¨': 'äº‘å—', 'è…¾å†²': 'äº‘å—',
    'æ¥šé›„': 'äº‘å—', 'å¤§ç†': 'äº‘å—', 'æ™¯æ´ª': 'äº‘å—', 'èŠ’å¸‚': 'äº‘å—', 'ç‘ä¸½': 'äº‘å—',
    // è¥¿è—
    'æ—¥å–€åˆ™': 'è¥¿è—', 'æ˜Œéƒ½': 'è¥¿è—', 'æ—èŠ': 'è¥¿è—', 'å±±å—': 'è¥¿è—', 'é‚£æ›²': 'è¥¿è—',
    // é™•è¥¿
    'é“œå·': 'é™•è¥¿', 'å®é¸¡': 'é™•è¥¿', 'å’¸é˜³': 'é™•è¥¿', 'æ¸­å—': 'é™•è¥¿', 'å»¶å®‰': 'é™•è¥¿',
    'æ±‰ä¸­': 'é™•è¥¿', 'æ¦†æ—': 'é™•è¥¿', 'å®‰åº·': 'é™•è¥¿', 'å•†æ´›': 'é™•è¥¿', 'å…´å¹³': 'é™•è¥¿',
    'éŸ©åŸ': 'é™•è¥¿', 'åé˜´': 'é™•è¥¿',
    // ç”˜è‚ƒ
    'é‡‘æ˜Œ': 'ç”˜è‚ƒ', 'ç™½é“¶': 'ç”˜è‚ƒ', 'å¤©æ°´': 'ç”˜è‚ƒ', 'æ­¦å¨': 'ç”˜è‚ƒ', 'å¼ æ–': 'ç”˜è‚ƒ',
    'å¹³å‡‰': 'ç”˜è‚ƒ', 'é…’æ³‰': 'ç”˜è‚ƒ', 'åº†é˜³': 'ç”˜è‚ƒ', 'å®šè¥¿': 'ç”˜è‚ƒ', 'é™‡å—': 'ç”˜è‚ƒ',
    'ç‰é—¨': 'ç”˜è‚ƒ', 'æ•¦ç…Œ': 'ç”˜è‚ƒ', 'åˆä½œ': 'ç”˜è‚ƒ', 'æ´®å—å¸‚': 'ç”˜è‚ƒ',
    // é’æµ·
    'æµ·ä¸œ': 'é’æµ·', 'æ ¼å°”æœ¨': 'é’æµ·', 'å¾·ä»¤å“ˆ': 'é’æµ·',
    // å®å¤
    'çŸ³å˜´å±±': 'å®å¤', 'å´å¿ ': 'å®å¤', 'å›ºåŸ': 'å®å¤', 'ä¸­å«': 'å®å¤', 'çµæ­¦': 'å®å¤', 'é’é“œå³¡': 'å®å¤',
    // æ–°ç–†
    'å…‹æ‹‰ç›ä¾': 'æ–°ç–†', 'åé²ç•ª': 'æ–°ç–†', 'å“ˆå¯†': 'æ–°ç–†', 'æ˜Œå‰': 'æ–°ç–†', 'åšå°”å¡”æ‹‰': 'æ–°ç–†',
    'å·´éŸ³éƒ­æ¥': 'æ–°ç–†', 'é˜¿å…‹è‹': 'æ–°ç–†', 'å…‹å­œå‹’è‹': 'æ–°ç–†', 'å–€ä»€': 'æ–°ç–†', 'å’Œç”°': 'æ–°ç–†',
    'ä¼ŠçŠ': 'æ–°ç–†', 'å¡”åŸ': 'æ–°ç–†', 'é˜¿å‹’æ³°': 'æ–°ç–†', 'é˜œåº·': 'æ–°ç–†', 'åº“å°”å‹’': 'æ–°ç–†',
    'é˜¿å›¾ä»€': 'æ–°ç–†', 'é˜¿å…‹è‹å¸‚': 'æ–°ç–†', 'å–€ä»€å¸‚': 'æ–°ç–†', 'å’Œç”°å¸‚': 'æ–°ç–†', 'ä¼Šå®': 'æ–°ç–†',
    'å¥å±¯': 'æ–°ç–†', 'ä¹Œè‹': 'æ–°ç–†', 'é˜¿å‹’æ³°': 'æ–°ç–†'
};

// æ ¹æ®åŸå¸‚è·å–æ‰€å±çœä»½
function getProvinceForCity(city) {
    return CITY_TO_PROVINCE[city] || null;
}

// ä¸»å‡½æ•°
async function main() {
    console.log('='.repeat(60));
    console.log('æ•°æ®é‡æ–°ç»„ç»‡å·¥å…·ï¼ˆæŒ‰çœä»½ï¼‰');
    console.log('='.repeat(60));

    // è¯»å– data.js
    const dataPath = path.join(__dirname, '..', 'data', 'data.js');
    if (!fs.existsSync(dataPath)) {
        console.error('\nâŒ é”™è¯¯: data/data.js æ–‡ä»¶ä¸å­˜åœ¨');
        process.exit(1);
    }

    const dataContent = fs.readFileSync(dataPath, 'utf8');

    // æ‰§è¡Œ data.js è·å–æ•°æ®
    // æ”¯æŒä¸¤ç§æ ¼å¼ï¼šcityData æˆ– provinceData
    let cityData;
    try {
        // ä½¿ç”¨ Function æ„é€ å™¨æ¥è·å–å¯¼å‡ºçš„å˜é‡
        const getData = new Function(dataContent + '; return { cityData: typeof cityData !== "undefined" ? cityData : null, provinceData: typeof provinceData !== "undefined" ? provinceData : null };');
        const data = getData();

        if (data.provinceData) {
            // data.js å·²ç»æ˜¯ provinceData æ ¼å¼ï¼Œè½¬æ¢å› cityData
            console.log('\nâœ“ æ£€æµ‹åˆ° provinceData æ ¼å¼ï¼Œæ­£åœ¨è½¬æ¢å› cityData...');
            cityData = {};

            // å°† provinceData è½¬æ¢å› cityData
            Object.entries(data.provinceData).forEach(([, provinceInfo]) => {
                const videos = provinceInfo.videos || [];
                videos.forEach(video => {
                    const city = video.city || 'æœªåˆ†ç±»';
                    if (!cityData[city]) {
                        cityData[city] = { videos: [] };
                    }
                    cityData[city].videos.push(video);
                });
            });

            console.log(`âœ“ è½¬æ¢å®Œæˆï¼Œå…± ${Object.keys(cityData).length} ä¸ªåŸå¸‚`);
        } else if (data.cityData) {
            cityData = data.cityData;
        } else {
            // ç›´æ¥æ˜¯ cityData æ ¼å¼
            cityData = getData();
        }
    } catch (e) {
        // å›é€€åˆ°ä¼ ç»Ÿæ–¹å¼
        cityData = eval(dataContent + '; cityData;');
    }

    if (!cityData || typeof cityData !== 'object') {
        console.error('\nâŒ é”™è¯¯: æ— æ³•è§£æ cityData');
        process.exit(1);
    }

    console.log(`\nâœ“ æˆåŠŸè¯»å– ${Object.keys(cityData).length} ä¸ªæ•°æ®æ¡ç›®`);

    // æŒ‰çœä»½é‡æ–°ç»„ç»‡æ•°æ®
    const provinceData = {};

    Object.entries(cityData).forEach(([key, value]) => {
        const videos = value.videos || [];

        videos.forEach(video => {
            // è·å–è¯¥è§†é¢‘çš„åŸå¸‚ï¼ˆä¼˜å…ˆä½¿ç”¨ manualCityï¼Œå¦åˆ™ä½¿ç”¨ autoCitiesï¼‰
            const city = video.manualCity || (video.autoCities && video.autoCities[0]);

            if (!city) {
                // å¦‚æœæ²¡æœ‰åŸå¸‚ï¼Œè·³è¿‡
                return;
            }

            // è·å–çœä»½
            const province = getProvinceForCity(city);

            if (!province) {
                console.warn(`âš ï¸  æ— æ³•ç¡®å®šåŸå¸‚ "${city}" çš„çœä»½`);
                return;
            }

            // æ·»åŠ åˆ°çœä»½æ•°æ®ä¸­
            if (!provinceData[province]) {
                provinceData[province] = {
                    videos: []
                };
            }

            provinceData[province].videos.push({
                title: video.title,
                url: video.url,
                date: video.date,
                aid: video.aid,
                bvid: video.bvid,
                views: video.views,
                danmaku: video.danmaku,
                city: city,           // åŸå¸‚åç§°
                autoCities: video.autoCities,
                manualCity: video.manualCity
            });
        });
    });

    // æŒ‰çœä»½åç§°æ’åº
    const sortedProvinces = Object.keys(provinceData).sort();

    // ç”Ÿæˆè¾“å‡º
    const provincesStr = sortedProvinces.map(province => {
        const provinceVideos = provinceData[province].videos.sort((a, b) => new Date(b.date) - new Date(a.date));

        const videosStr = provinceVideos.map(video => {
            const title = video.title.replace(/\\/g, '\\\\').replace(/"/g, '\\"');
            const autoCitiesStr = JSON.stringify(video.autoCities);
            const manualCityStr = video.manualCity ? `"${video.manualCity}"` : 'null';
            const cityStr = video.city ? `"${video.city}"` : 'null';

            return `        {
                title: "${title}",
                url: "${video.url}",
                date: "${video.date}",
                aid: ${video.aid},
                bvid: "${video.bvid}",
                views: ${video.views},
                danmaku: ${video.danmaku},
                city: ${cityStr},
                autoCities: ${autoCitiesStr},
                manualCity: ${manualCityStr}
            }`;
        }).join(',\n');

        return `    "${province}": {
        videos: [
${videosStr}
        ]
    }`;
    }).join(',\n\n');

    const output = `// åŸå¸‚æ•°æ®é…ç½®ï¼ˆæŒ‰çœä»½ç»„ç»‡ï¼‰
// åŸå¸‚åç§°éœ€è¦ä¸ ECharts åœ°å›¾æ•°æ®åŒ¹é…
// æ•°æ®æ¥æºï¼šå“”å“©å“”å“©UPä¸» è€çŒ«é±¼ä¸åƒé±¼
// æœ€åæ›´æ–°æ—¶é—´: ${new Date().toISOString()}
//
// æ•°æ®è¯´æ˜ï¼š
// - city: åŸå¸‚åç§°ï¼ˆä¼˜å…ˆä½¿ç”¨ manualCityï¼Œå¦åˆ™ä½¿ç”¨ autoCitiesï¼‰
// - autoCities: è‡ªåŠ¨ä»æ ‡é¢˜ä¸­æå–çš„åŸå¸‚æ•°ç»„
// - manualCity: äººå·¥æ‰‹åŠ¨æ ‡è®°çš„åŸå¸‚
//
// çœä»½åŒ…å«è¯¥çœä»½ä¸‹çš„æ‰€æœ‰åŸå¸‚è§†é¢‘

const provinceData = {
${provincesStr}
};
`;

    // ç»Ÿè®¡ä¿¡æ¯
    console.log('\n' + '='.repeat(60));
    console.log('ğŸ“Š ç»Ÿè®¡ä¿¡æ¯');
    console.log('='.repeat(60));
    console.log(`\næ€»è§†é¢‘æ•°: ${Object.values(provinceData).reduce((sum, p) => sum + p.videos.length, 0)}`);
    console.log(`è¦†ç›–çœä»½æ•°: ${sortedProvinces.length}`);

    console.log(`\nå„çœä»½è§†é¢‘æ•°:`);
    console.log('-'.repeat(40));
    sortedProvinces.forEach((province, index) => {
        const count = provinceData[province].videos.length;
        console.log(`${(index + 1).toString().padStart(2, ' ')}. ${province.padEnd(8, 'ã€€')} - ${count} ä¸ªè§†é¢‘`);
    });

    // å†™å…¥æ–‡ä»¶
    fs.writeFileSync(dataPath, output, 'utf8');

    console.log('\n' + '='.repeat(60));
    console.log('âœ“ æ•°æ®å·²é‡æ–°ç»„ç»‡å¹¶ä¿å­˜åˆ°: data/data.js');
    console.log('='.repeat(60));
    console.log('\nè¯´æ˜:');
    console.log('- æ•°æ®å·²æŒ‰çœä»½é‡æ–°ç»„ç»‡');
    console.log('- æ¯ä¸ªçœä»½åŒ…å«è¯¥çœæ‰€æœ‰åŸå¸‚çš„è§†é¢‘');
    console.log('- æ¯ä¸ªè§†é¢‘åŒ…å« city, autoCities, manualCity å­—æ®µ');
}

// è¿è¡Œä¸»å‡½æ•°
main().catch(error => {
    console.error('\nâŒ å‘ç”Ÿé”™è¯¯:', error);
    process.exit(1);
});
